# Generated by Django 5.2 on 2025-05-16 17:46

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("users", "0015_rename_keywords_userprofile_research_interests"),
    ]

    operations = [
        migrations.AddField(
            model_name="dataset",
            name="dataloaders",
            field=models.JSONField(blank=True, default=list, null=True),
        ),
        migrations.AddField(
            model_name="dataset",
            name="link",
            field=models.URLField(blank=True, max_length=500, null=True),
        ),
        migrations.AddField(
            model_name="dataset",
            name="paper_link",
            field=models.URLField(blank=True, max_length=500, null=True),
        ),
        migrations.AddField(
            model_name="dataset",
            name="papers",
            field=models.JSONField(default=list),
        ),
        migrations.AddField(
            model_name="dataset",
            name="similar_datasets",
            field=models.JSONField(blank=True, default=list, null=True),
        ),
        migrations.AddField(
            model_name="dataset",
            name="subtitle",
            field=models.TextField(blank=True, null=True),
        ),
        migrations.AddField(
            model_name="dataset",
            name="benchmarks_json",
            field=models.JSONField(default=list),
        ),
        migrations.RunSQL(
            sql="UPDATE users_dataset SET benchmarks_json = CASE WHEN benchmarks IS NULL THEN '[]'::jsonb ELSE jsonb_build_array(benchmarks) END;",
            reverse_sql="UPDATE users_dataset SET benchmarks = NULL;",
        ),
        migrations.RemoveField(
            model_name="dataset",
            name="benchmarks",
        ),
        migrations.RenameField(
            model_name="dataset",
            old_name="benchmarks_json",
            new_name="benchmarks",
        ),
    ]
